{% extends "p3/base.html" %}

{% block PAGE_TITLE %}Talk voting &mdash; {% endblock %}

{% block MAIN_CONTENT %}
    <h1>Talk Voting</h1>
    
    <div class="page-summary">        
        <p>{Summary} Loren Ipsum</p>
    </div>
    
    
    <div class="span-8">
        <ul id="talk-voting">
            {% for t in talks %}
            <li>
<!--                 <h2><a href="#">{{ t.title }}</a></h2> -->
                <h2>{{ t.title }}</h2>
                <div class="meta">By <a href="/path/to/speaker-profile"><b>Speaker Name</b></a> on <b>EuroPython tracks</b></div>                                
                <form action="{% url conference-voting %}" method="post">{% csrf_token %}
                    <input name="vote-{{ t.id }}" id="id_vote-{{ t.id }}" type="range" min="0" max="10" value="{{ t.user_vote.vote }}" step="0.5" />
                    <div class="rateit" data-rateit-backingfld="#id_vote-{{ t.id }}"></div>
                </form>                
                <dl>
                    <dt rel="div[data-talk={{ t.id }}]" class="toggle">Dettagli del talk</dt>
                    <dd>
                        <div data-talk="{{ t.id }}">
                            {{ t.getAbstract.body|linebreaks }}
                        </div>                    
                    </dd>                    
                </dl>
            </li>
            {% endfor %}        
        </ul>
        <script type="text/javascript">
            function rate(e, val) {
                var field = $(e.rateit('backingfld'));
                var form = field.parents('form');
                if(val == undefined) 
                    field.val(e.rateit('value'))
                else
                    field.val(val);
                form.ajaxSubmit();
            }
            $('#talk-voting .rateit')
                .rateit()
                .bind('rated', function() {
                    rate($(this));
                })
                .bind('reset', function() {
                    rate($(this), 0);
                });
        </script>
    </div>
    
    <div class="span-4 last">
        <aside>    
            <div class="cms">
                <h4>Sample h4 header</h4>

                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Etiam sit amet elit vitae arcu interdum ullamcorper. Nullam ultrices, nisi quis scelerisque convallis, augue neque tempor enim, et mattis justo nibh eu elit. Quisque ultrices gravida pede. Mauris accumsan vulputate tellus. Phasellus condimentum bibendum dolor. Mauris sed ipsum. Phasellus in diam. Nam sapien ligula, consectetuer id, hendrerit in, cursus sed, leo. Nam tincidunt rhoncus urna. Aliquam id massa ut nibh bibendum imperdiet. Curabitur neque mauris, porta vel, lacinia quis, placerat ultrices, orci.</p>
                
                
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Etiam sit amet elit vitae arcu interdum ullamcorper. Nullam ultrices, nisi quis scelerisque convallis, augue neque tempor enim, et mattis justo nibh eu elit. Quisque ultrices gravida pede. Mauris accumsan vulputate tellus. Phasellus condimentum bibendum dolor. Mauris sed ipsum. Phasellus in diam. Nam sapien ligula, consectetuer id, hendrerit in, cursus sed, leo. Nam tincidunt rhoncus urna. Aliquam id massa ut nibh bibendum imperdiet. Curabitur neque mauris, porta vel, lacinia quis, placerat ultrices, orci.</p>
                
            
            </div>
        
        </aside>
    </div>    
{% endblock %}
