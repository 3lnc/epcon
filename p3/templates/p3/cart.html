{% extends "assopy/base.html" %}
{% load p3 assopy_tags i18n %}

{% block BODY_CLASS %}wizard{% endblock %}


{% block ASSOPY_MAIN_CONTENT %}

    <h1>Buy tickets (1 of 2)</h1>

    <div class="page-summary">
        <p>Select conference tickets and additional services.</p>    
    </div>
        
    
        {% if not account_type %}
        <section class="notice">
            <p>In order to buy the tickets you have to <a href="/accounts/login/?next={% url p3-cart %}">log in</a></p>
        </section>
        {% endif %}

        {{ form|form_errors }}

        <form id="form-cart" action="{% url p3-cart %}" method="post">{% csrf_token %}
            <fieldset>
                <div class="tickets-table">
                                        
                    <legend>Conference tickets</legend>
                    
                    <p>{Sample text} Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi faucibus orci at lectus ornare 
                    et suscipit orci luctus.</p>

                    <div class="cms">    
                        <table>
                            <col />

                            <col style="background: #E1DBC5" />
                            <col style="background: #E1DBC5" />

                            <col />
                            <col />

                            <col style="background: #E1DBC5" />
                            <col style="background: #E1DBC5" />
                            
{%comment %}    
                            <col {% if account_type != "p" %} style="background: #2d3b66"{% endif %}/>
                            <col {% if account_type != "p" %} style="background: #2d3b66"{% endif %}/>
                            
                            <col {% if account_type != "p" %} style="background: #2d3b66"{% endif %}/>
                            <col {% if account_type != "p" %} style="background: #2d3b66"{% endif %}/>
                            
                            <col {% if account_type != "c" %} style="background: #2d3b66"{% endif %}/>
                            <col {% if account_type != "c" %} style="background: #2d3b66"{% endif %}/>
{% endcomment %}
                            <thead>
                                <tr>
                                    <th>&nbsp;</th>
                                    <th colspan="2">{% trans "Student" %}</th>
                                    <th colspan="2">{% trans "Personal" %}</th>
                                    <th colspan="2">{% trans "Businness" %}</th>
                                </tr>
                                <tr>
                                    <th>&nbsp;</th>
                                    <th>{% trans "Price" %}</th>
                                    <th>{% trans "Q.ty" %}</th>
                                    <th>{% trans "Price" %}</th>
                                    <th>{% trans "Q.ty" %}</th>
                                    <th>{% trans "Price" %}</th>
                                    <th>{% trans "Q.ty" %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr> 
                                    <td>Ticket Early - Standard</td> 
                                    {% render_cart_row "TES" form fares %}
                                </tr> 
                                <tr> 
                                    <td>Ticket Early - Full Access</td> 
                                    {% render_cart_row "TEF" form fares %}
                                </tr> 
                                <tr> 
                                    <td>Ticket Early - Daily Pass</td> 
                                    {% render_cart_row "TED" form fares %}
                                </tr> 
        {% comment %}
                                <tr> 
                                    <td>Ticket Regular - Standard</td> 
                                    {% render_cart_row "TRS" form fares %}
                                </tr> 
                                <tr> 
                                    <td>Ticket Regular - Full Access</td> 
                                    {% render_cart_row "TRF" form fares %}
                                </tr> 
                                <tr> 
                                    <td>Ticket Regular - Daily Pass</td> 
                                    {% render_cart_row "TRD" form fares %}
                                </tr> 
    
                                <tr> 
                                    <td>Ticket OnDesk - Standard</td> 
                                    {% render_cart_row "TDS" form fares %}
                                </tr> 
                                <tr> 
                                    <td>Ticket OnDesk - Full Access</td> 
                                    {% render_cart_row "TDF" form fares %}
                                </tr> 
                                <tr> 
                                    <td>Ticket OnDesk - Daily Pass</td> 
                                    {% render_cart_row "TDD" form fares %}
                                </tr> 
    
                                <tr> 
                                    <td>Ticket OnDesk - Single Training</td> 
                                    {% render_cart_row "TDT" form fares %}
                                </tr> 
        {% endcomment %}
                            </tbody>
                        </table>
                    <!-- /cms -->
                    </div>
                    
                    <div class="total"> 
                        Conference tickets total (VAT inc.): <b>€ 0</b>
                    </div> 
                </div> 
                <div class="events-table"> 
                    
                    <legend>PyEvents</legend>
                    
                    <p>{Sample text} Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi faucibus orci at lectus ornare 
                    et suscipit orci luctus.</p>
                    
                    <div class="cms">   
            
                        <table>
                            <col />
                            <col />
                            <col />
                            <thead>
                                <tr>
                                    <th>{% trans "Event name" %}</th>
                                    <th>{% trans "Price" %}</th>
                                    <th>{% trans "Q.ty" %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="toggle">PyFiorentina</span>
                                        <p>The only dinner that any self-respecting Gourmet doesn't want to miss, set in one of the best steak houses in the historic center of Florence where you can taste our famous bistecca alla fiorentina.
    
    If you don't like to drink or you are vegetarian... Come anyway, you won't regret it!</p>
                                    </td>
                                    <td>€ 30</td>
                                    <td><input type="text" size="2" /></td>
                                </tr>
                            </tbody>
                        </table>

                    <!-- /cms -->
                    </div>                
            
                    <div class="total"> 
                        PyEvents total (VAT inc.): <b>€ 0</b>
                    </div> 
                </div> 
                <div class="pp-table"> 
                
                    <legend>Partner Program</legend>

                    <p>{Sample text} Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi faucibus orci at lectus ornare 
                    et suscipit orci luctus.</p>
                    
                    <div class="cms">                    
                        <table>
                            <col />
                            <col />
                            <col />
                            <thead>
                                <tr>
                                    <th>{% trans "Event name" %}</th>
                                    <th>{% trans "Date" %}</th>
                                    <th>{% trans "Price" %}</th>
                                    <th>{% trans "Q.ty" %}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Cioccolatai a Firenze</td>
                                    <td>Mon, 20 Jun</td>
                                    <td>€ 80</td>
                                    <td><input type="text" size="2" /></td>
                                </tr>
                                <tr>
                                    <td>Cioccolatai a Firenze</td>
                                    <td>Wed, 22 Jun</td>
                                    <td>€ 80</td>
                                    <td><input type="text" size="2" /></td>
                                </tr>
                                <tr>
                                    <td>Uffizi</td>
                                    <td>Wed, 22 Jun</td>
                                    <td>€ 40</td>
                                    <td><input type="text" size="2" /></td>
                                </tr>
                            </tbody>
                        </table>
                    <!-- /cms -->
                    </div>

                    <div class="total"> 
                        Partner Program total (VAT inc.): <b>€ 0</b> 
                    </div> 
                    
                </div> 

                <div class="total grand"> 
                    Grand total (VAT inc.): <b>€ 0</b> 
                </div> 
            
            </fieldset>

            <fieldset class="border">
                <button type="submit">Proceed to Checkout &rarr;</button>
            </fieldset>
        </form>
        <script type="text/javascript">
            function calcTotal() {
                var total = 0;
                $('#form-cart input').each(function() {
                    var x = Number(this.value);
                    if(!isNaN(x)) {
                        var fare = Number($('#fare-' + this.name).html());
                        total += x * fare;
                    }
                });
                $('#form-cart .total b').html('€ ' + total);
            }
            $('#form-cart input').change(calcTotal);
            calcTotal();
        </script>
    </div>
{% endblock %}

